spring:
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
    username: sa
    password:
    driver-class-name: org.h2.Driver
  sql:
    init:
      # Run the H2-compatible schema script instead of relying on Hibernate DDL.
      # This avoids failures on PostgreSQL-specific column types (vector, text[], uuid[], jsonb).
      mode: always
      schema-locations: classpath:h2-schema.sql
  jpa:
    hibernate:
      # Schema is created by the SQL init script above; Hibernate only validates.
      # Use 'none' so Hibernate does not attempt DDL generation with pg-specific column types.
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
    open-in-view: false
    show-sql: false
    # Ensure Spring SQL init runs before JPA validates the schema.
    defer-datasource-initialization: true
  flyway:
    enabled: false
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: test-client-id
            client-secret: test-client-secret
            scope: openid, email, profile

server:
  port: 0

app:
  openai:
    api-key: test-api-key
    extraction-model: gpt-4o-mini
    chat-model: gpt-4o
    embedding-model: text-embedding-3-small
  whapi:
    api-key: test-whapi-key
    webhook-secret: test-webhook-secret
  jwt:
    secret: test-secret-key-that-is-at-least-256-bits-long-for-hmac-sha256-algorithm
    expiration-ms: 86400000
  processing:
    async-pool-size: 2
    confidence-auto-threshold: 0.8
    confidence-review-threshold: 0.5
    listing-expiry-days: 60
  cache:
    jargon-ttl-minutes: 1
    categories-ttl-minutes: 1
